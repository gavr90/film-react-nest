# FILM!
Учебный проект в рамках курса Яндекс.Практикум. 
Прототип сервиса бронирования билетов в кинотеатр. Пользователь может:
- просмотреть список фильмов;
- ознакомиться с описанием фильма и его сеансами;
- посмотреть карту мест в зале;
- выбрать сеанс и места, оформить заказ.

1. Созданы контроллеры и сервисы обработки запросов клиентской части (получение информации о фильмах, бронирование билетов)
2. Создан репозиторий на базе БД Postgres
3. Настроен TypeORM для взаимодействия с Postgres
4. Реализован модуль чтения настроек из переменных среды
5. Созданы логгеры DevLogger, JsonLogger и TSKVLogger, подключение осуществляется через переменные окружения ("json, tskv, dev")
6. Написаны тесты для проверки работы логгеров, контролеров и сервисов приложения (запуск из `backend/` команда `npm run test`)
7. Приложение докеризировано, создан Github Action, который при обновлении собирает образы Docker для backend и frontend и публикует их в GitHub Registry.
8. Настроен удаленный сервер, прикреплено доменное имя https://iamgavrfilm.nomorepartiesco.ru/, выполнен деплой проекта
9. Выпущен сертификат, настроено подключение к сайту по https и редирект с http на https
10. Описана конфигурация docker-compose.local для локальной установки приложения в Docker-контейнерах


## Установка локально в Docker

В директориях:

`backend/`
Создайте `.env` файл из примера `.env.example`

`frontend/`
Создайте `.env` файл из примера `.env.example`

Запустите команду:
`sudo docker-compose -f docker-compose.local.yml up -d`

Через PGAdmin (http://localhost:8080/) авторизуйтесь, используя email, password из .env.
Создайте сервер и настройте его Connection (Host, Maintenance database, Username, Password из .env `FILM-REACT-NEST/backend/`).

Приложение доступно на http://localhost/ 

## Установка локально без Docker 

### Postgres
Установите СУБД PostgreSQL и запустить её. 
Подключившись от лица супер-пользователя postgres создайте отдельного пользователя.
Используйте заготовки запросов для заполнения СУБД тестовыми данными фильмов и заказов, эти запросы размещены в проекте:
`backend/test/prac.init.sql` — создаёт БД и таблицы
`backend/test/prac.films.sql` — заполняет таблицу фильмами
`backend/test/prac.shedules.sql` — заполняет таблицу расписанием сеансов

### Бэкенд

В терминале перейдите в папку с исходным кодом бэкенда
`cd backend`

Установите зависимости
`npm ci`

Создайте `.env` файл из примера `.env.example`.

Базы данных должны быть запущены.

Запустите бэкенд:
`npm run start:dev`

### Фронтенд

В терминале перейдите в папку с исходным кодом фронтенд
`cd frontend`

Создайте `.env` файл из примера `.env.example`

Установите зависимости
`npm ci`

Запустите фронтенд:
`npm run dev`

Приложение доступно на http://localhost:5173/ 



